<!DOCTYPE html>
<html lang="en">
<script src="/sdks/Dev-OneSignalSDK.js" async=""></script>
<script>
    function getUrlQueryParam(name) {
        var url = window.location.href;
        // This is just to avoid case sensitiveness
        url = url.toLowerCase(); 
        // This is just to avoid case sensitiveness for query parameter name
        name = name.replace(/[\[\]]/g, "\\$&").toLowerCase();
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }
    const appId = getUrlQueryParam('app_id');
    var OneSignal = window.OneSignal || [];
    OneSignal.push(function() {
      OneSignal.init({appId});
    });

    function sendOutcome() {
        OneSignal.push(function() {
            const outcomeName = document.querySelector('#outcome_name').value;
            OneSignal.sendOutcome(outcomeName);
        });
    }

    function sendOutcomeWithWeight() {
        OneSignal.push(function() {
            const outcomeName = document.querySelector('#outcome_name').value;
            const outcomeWeight = parseFloat(document.querySelector('#outcome_weight').value);
            OneSignal.sendOutcome(outcomeName, outcomeWeight);
        });
    }
  </script>
<head>
    <meta charset="utf-8">
    <title>OneSignal WebSDK Sandbox</title>
    <link rel="shortcut icon" href="#">
</head>
<body>
    <h1>OneSignal WebSDK Sandbox</h1>
    <p class="description">WebSDK Sandbox Environment</p>
    <input id="outcome_name" value="iryna-022020" />
    <button onclick="javascript:sendOutcome();">Send outcome</button>
    <br />
    <input id="outcome_weight" value=""/>
    <button onclick="javascript:sendOutcomeWithWeight();">Send outcome with weight</button>
</body>
</html>
