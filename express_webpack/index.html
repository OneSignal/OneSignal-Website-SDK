<!DOCTYPE html>
<html lang="en">
<script src="/sdks/Dev-OneSignalSDK.js" async=""></script>
<script>
    function getUrlQueryParam(name) {
        var url = window.location.href;
        // This is just to avoid case sensitiveness
        url = url.toLowerCase();
        // This is just to avoid case sensitiveness for query parameter name
        name = name.replace(/[\[\]]/g, "\\$&").toLowerCase();
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }
    const appId = getUrlQueryParam('app_id');
    var OneSignal = window.OneSignal || [];
    OneSignal.push(function() {
      OneSignal.init({
          appId,
          notifyButton: {
              enable: true
          },
          promptOptions: {
              slidedown: {
                  autoPrompt: false,
                  enabled: true,
                  categories: {
                      positiveButton: "Howdy, yes",
                      negativeButton: "Cancelar",
                      tags: [
                        {
                            tag: "tag1",
                            label: "Tag 1",
                        },
                        {
                            tag: "tag2",
                            label: "Tag 2",
                        },
                        {
                            tag: "tag3",
                            label: "Tag 3",
                        },
                        {
                            tag: "tag4",
                            label: "Tag 4",
                        },
                        {
                            tag: "tag5",
                            label: "Tag 5",
                        },
                        {
                            tag: "tag6",
                            label: "Tag 6",
                        },
                        {
                            tag: "tag7",
                            label: "Tag 7",
                        },
                        {
                            tag: "tag8",
                            label: "Tag 8",
                        },
                        {
                            tag: "tag9",
                            label: "Tag 9",
                        },
                        {
                            tag: "tag10",
                            label: "Tag 10 Long Label That needs to be shortened",
                        },
                      ]
                  }
              }
          }
        });
    });

    function sendUniqueOutcome() {
        OneSignal.push(function() {
            const outcomeName = document.querySelector('#unique_outcome_name').value;
            OneSignal.sendUniqueOutcome(outcomeName);
        });
    }

    function sendOutcome() {
        OneSignal.push(function() {
            const outcomeName = document.querySelector('#outcome_name').value;
            OneSignal.sendOutcome(outcomeName);
        });
    }

    function sendOutcomeWithWeight() {
        OneSignal.push(function() {
            const outcomeName = document.querySelector('#outcome_name').value;
            const outcomeWeight = parseFloat(document.querySelector('#outcome_weight').value);
            OneSignal.sendOutcome(outcomeName, outcomeWeight);
        });
    }
  </script>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OneSignal WebSDK Sandbox</title>
    <link rel="shortcut icon" href="#">
</head>
<body>
    <h1>OneSignal WebSDK Sandbox</h1>
    <p class="description">WebSDK Sandbox Environment</p>
    <input id="unique_outcome_name" value="TestUnique" />
    <button onclick="javascript:sendUniqueOutcome();">Send unique outcome</button>
    <br />
    <br />
    <input id="outcome_name" value="Rodrigo" />
    <button onclick="javascript:sendOutcome();">Send outcome</button>
    <br />
    <input id="outcome_weight" value=""/>
    <button onclick="javascript:sendOutcomeWithWeight();">Send outcome with weight</button>
    <br/>
    <div class='onesignal-customlink-container'></div>
</body>
</html>
