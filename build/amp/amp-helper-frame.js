document.head.innerHTML="\n  <meta charset=\"utf-8\">\n  <script>(function(){var f,g=function(a){return\"undefined\"!=typeof window&&window===a?a:\"undefined\"!=typeof global&&null!=global?global:a}(this);function h(a,b){b=void 0===b?\"\":b;try{return decodeURIComponent(a)}catch(c){return b}};var m=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;Date.now();self.log=self.log||{user:null,dev:null,userForEmbed:null};var n=self.log;var p,r;\nfunction t(a){var b;p||(p=self.document.createElement(\"a\"),r=self.UrlCache||(self.UrlCache=Object.create(null)));var c=r[a];if(c)return c;var d=p;d.href=a;d.protocol||(d.href=d.href);var e={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:\"0\"==d.port?\"\":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};\"/\"!==e.pathname[0]&&(e.pathname=\"/\"+e.pathname);if(\"http:\"==e.protocol&&80==e.port||\"https:\"==e.protocol&&443==e.port)e.port=\"\",e.host=e.hostname;e.origin=d.origin&&\n\"null\"!=d.origin?d.origin:\"data:\"!=e.protocol&&e.host?e.protocol+\"//\"+e.host:e.href;var k=e,l=k;return b?l:r[a]=l};function u(a){a||(a={debug:!1,windowContext:window});this.h={};this.c={};this.u=a.debug;this.i=this.B=this.C=!1;this.j=this.o=this.s=this.b=this.m=null;this.a=a.windowContext||window}f=u.prototype;\nf.listen=function(a){var b=this;return(new Promise(function(c,d){b.i?d(Error(\"Already connected.\")):b.C?d(Error(\"Already listening for connections.\")):Array.isArray(a)?(b.s=b.K.bind(b,a,c,d),b.a.addEventListener(\"message\",b.s)):d(Error(\"allowedOrigins should be a string array of allowed origins to accept messages from. Got:\",a))})).then(function(){b.send(u.Topics.CONNECT_HANDSHAKE,null);b.i=!0})};\nf.K=function(a,b,c,d){var e=d.data,k=d,l=k.ports;a:{for(var k=t(k.origin).origin,q=0;q<a.length;q++)if(t(a[q]).origin===k){a=!0;break a}a=!1}a&&e&&e.topic===u.Topics.CONNECT_HANDSHAKE&&(this.a.removeEventListener(\"message\",this.s),this.b=l[0],this.j=this.w.bind(this),this.b.addEventListener(\"message\",this.j,!1),this.b.start(),b())};\nf.connect=function(a,b){var c=this;return new Promise(function(d,e){a||e(Error(\"Provide a valid Window context to connect to.\"));b||e(Error(\"Provide an expected origin for the remote Window or provide the wildcard *.\"));c.i?e(Error(\"Already connected.\")):c.B?e(Error(\"Already connecting.\")):(c.m=new MessageChannel,c.b=c.m.port1,c.o=c.J.bind(c,c.b,b,d),c.b.addEventListener(\"message\",c.o),c.b.start(),a.postMessage({topic:u.Topics.CONNECT_HANDSHAKE},\"*\"===b?\"*\":t(b).origin,[c.m.port2]))})};\nf.J=function(a,b,c){this.i=!0;a.removeEventListener(\"message\",this.o);this.j=this.w.bind(this);a.addEventListener(\"message\",this.j,!1);c()};f.w=function(a){a=a.data;if(this.h[a.id]&&a.isReply){var b=this.h[a.id];delete this.h[a.id];var c=b.promiseResolver;b.message=a.data;c([a.data,this.A.bind(this,a.id,b.topic)])}else{var d=this.c[a.topic];if(d)for(var e=0;e<d.length;e++)(0,d[e])(a.data,this.A.bind(this,a.id,a.topic))}};f.on=function(a,b){this.c[a]?this.c[a].push(b):this.c[a]=[b]};\nf.off=function(a,b){if(b){var c=this.c[a].indexOf(b);-1!==c&&this.c[a].splice(c,1)}else this.c[a]&&delete this.c[a]};f.A=function(a,b,c){var d=this,e={id:a,topic:b,data:c,isReply:!0};this.b.postMessage(e);return new Promise(function(a){d.h[e.id]={message:c,topic:b,promiseResolver:a}})};f.send=function(a,b){var c=this,d={id:crypto.getRandomValues(new Uint8Array(10)).join(\"\"),topic:a,data:b};this.b.postMessage(d);return new Promise(function(e){c.h[d.id]={message:b,topic:a,promiseResolver:e}})};\ng.Object.defineProperties(u,{Topics:{configurable:!0,enumerable:!0,get:function(){return{CONNECT_HANDSHAKE:\"topic-connect-handshake\",NOTIFICATION_PERMISSION_STATE:\"topic-notification-permission-state\",SERVICE_WORKER_STATE:\"topic-service-worker-state\",SERVICE_WORKER_REGISTRATION:\"topic-service-worker-registration\",SERVICE_WORKER_QUERY:\"topic-service-worker-query\",STORAGE_GET:\"topic-storage-get\"}}}});function v(a){this.u=a&&a.debug;this.a=a.windowContext||window;this.g=new u({debug:this.u,windowContext:this.a});this.l={}}function w(a,b){var c=!0,d=null;a({success:c,error:c?void 0:d,result:c?b:void 0})}f=v.prototype;f.D=function(a,b){if(a&&a.isQueryTopicSupported){var c=!1,d;for(d in u.Topics)a.isQueryTopicSupported===u.Topics[d]&&(c=!0);w(b,c)}else w(b,Notification.permission)};\nf.I=function(a,b){var c=null;try{if(a&&a.key&&this.a.localStorage)c=this.a.localStorage.getItem(a.key);else{if(!n.user)throw Error(\"failed to call initLogConstructor\");n.user.warn(\"amp-web-push\",\"LocalStorage retrieval failed.\")}}catch(d){}w(b,c)};\nf.H=function(a,b){var c={isControllingFrame:!!this.a.navigator.serviceWorker.controller,url:this.a.navigator.serviceWorker.controller?this.a.navigator.serviceWorker.controller.scriptURL:null,state:this.a.navigator.serviceWorker.controller?this.a.navigator.serviceWorker.controller.state:null};w(b,c)};\nf.G=function(a,b){if(!a||!a.workerUrl||!a.registrationOptions)throw Error(\"Expected arguments workerUrl and registrationOptions in message, got:\",a);this.a.navigator.serviceWorker.register(a.workerUrl,a.registrationOptions).then(function(){w(b,null)}).catch(function(a){w(b,a?a.message||a.toString():null)})};f.messageServiceWorker=function(a){this.a.navigator.serviceWorker.controller.postMessage({command:a.topic,payload:a.payload})};\nf.F=function(a,b){var c=this;if(!a||!a.topic)throw Error(\"Expected argument topic in message, got:\",a);(new Promise(function(b){c.l[a.topic]=b;c.waitUntilWorkerControlsPage().then(function(){c.messageServiceWorker(a)})})).then(function(d){delete c.l[a.topic];return w(b,d)})};\nfunction x(a){a=a.a.location.search;var b=Object.create(null);if(a)for(var c;c=m.exec(a);){var d=h(c[1],c[1]).trim();c=c[2]?h(c[2],c[2]).trim():\"\";b[d]=c}var e=b;if(!e.parentOrigin)throw Error(\"Expecting parentOrigin URL query parameter.\");return e.parentOrigin}f.L=function(a){a=a.data;var b=a.command;a=a.payload;var c=this.l[b];\"function\"===typeof c&&c(a)};\nfunction y(a){return a.a.navigator.serviceWorker&&a.a.navigator.serviceWorker.controller&&\"activated\"===a.a.navigator.serviceWorker.controller.state}f.waitUntilWorkerControlsPage=function(){var a=this;return new Promise(function(b){y(a)?b():a.a.navigator.serviceWorker.addEventListener(\"controllerchange\",function(){y(a)?b():a.a.navigator.serviceWorker.controller.addEventListener(\"statechange\",function(){y(a)&&b()})})})};\nf.run=function(a){var b=this;this.g.on(u.Topics.NOTIFICATION_PERMISSION_STATE,this.D.bind(this));this.g.on(u.Topics.SERVICE_WORKER_STATE,this.H.bind(this));this.g.on(u.Topics.SERVICE_WORKER_REGISTRATION,this.G.bind(this));this.g.on(u.Topics.SERVICE_WORKER_QUERY,this.F.bind(this));this.g.on(u.Topics.STORAGE_GET,this.I.bind(this));this.waitUntilWorkerControlsPage().then(function(){b.a.navigator.serviceWorker.addEventListener(\"message\",b.L.bind(b))});this.g.listen([a||x(this)])};\nwindow._ampWebPushHelperFrame=new v({debug:!1});window._ampWebPushHelperFrame.run();})();\n//# sourceMappingURL=amp-web-push-helper-frame.js.map\n\n</script>\n";
document.body.innerHTML="\n\n";
var scripts = Array.from(document.querySelectorAll('script'));
scripts.forEach(function(script) {
  var scriptElement = document.createElement('script');
  scriptElement.setAttribute('type', 'text/javascript');
  scriptElement.innerHTML = script.innerHTML;
  script.parentNode.removeChild(script);
  document.body.appendChild(scriptElement);
});
